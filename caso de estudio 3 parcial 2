#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main() {
	
	int N = 5; // Número de filas
    int M = 5; // Número de columnas
    int matriz[N][M];
    int pares = 0;
    int impares = 0;
    int suma_principal = 0;
    int suma_secundaria = 0;
    int temp;

    // Llenar la matriz con números aleatorios entre 20 y 30
    srand(time(NULL));
    printf(" Matriz Original \n");
    for (int i = 0; i < N; i++) {
        for (int j = 0; j < M; j++) {
            matriz[i][j] = rand() % 11 + 20;
            printf("%4d", matriz[i][j]);
        }
        printf("\n");
    }

    // Determinar la cantidad de pares e impares
    for (int i = 0; i < N; i++) {
        for (int j = 0; j < M; j++) {
            if (matriz[i][j] % 2 == 0) {
                pares++;
            } else {
                impares++;
            }
        }
    }

    // Sumar la diagonal principal y secundaria
    // (Solo se realiza si la matriz es cuadrada)
    if (N == M) {
        for (int i = 0; i < N; i++) {
            suma_principal += matriz[i][i];
            suma_secundaria += matriz[i][N - 1 - i];
        }
    }

    // Mostrar la matriz traspuesta sin crear una nueva
    printf("\n Matriz Traspuesta \n");
    for (int j = 0; j < M; j++) {
        for (int i = 0; i < N; i++) {
            printf("%4d", matriz[i][j]);
        }
        printf("\n");
    }

    // Ordenar la matriz de forma decreciente, modificando la matriz original
    for (int i = 0; i < N; i++) {
        for (int j = 0; j < M; j++) {
            for (int k = 0; k < N; k++) {
                for (int l = 0; l < M; l++) {
                    if (matriz[i][j] > matriz[k][l]) {
                        temp = matriz[i][j];
                        matriz[i][j] = matriz[k][l];
                        matriz[k][l] = temp;
                    }
                }
            }
        }
    }
    
    printf("\n Matriz Ordenada de forma decreciente \n");
    for (int i = 0; i < N; i++) {
        for (int j = 0; j < M; j++) {
            printf("%4d", matriz[i][j]);
        }
        printf("\n");
    }

    printf("\n Resultados \n");
    if (N == M) {
        printf("Suma de la diagonal principal: %d\n", suma_principal);
        printf("Suma de la diagonal secundaria: %d\n", suma_secundaria);
    } else {
        printf("Las diagonales solo se calculan para matrices cuadradas.\n");
    }
    printf("Cantidad de numeros pares: %d\n", pares);
    printf("Cantidad de numeros impares: %d\n", impares);

    return 0;
}
